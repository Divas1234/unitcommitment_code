function createfigure(ymatrix1)
%CREATEFIGURE(ymatrix1)
%  YMATRIX1:  bar matrix data

%  Auto-generated by MATLAB on 27-Apr-2022 16:50:16

% Create figure
figure1 = figure('Color',[1 1 1]);

% Create axes
axes1 = axes('Parent',figure1,...
    'Position',[0.13 0.255079006772009 0.775 0.669920993227989]);
hold(axes1,'on');

% Create multiple lines using matrix input to bar
% bar1 = bar(ymatrix1(:,1:5),'EdgeColor','none','BarLayout','stacked','Parent',axes1);
bar1 = bar(ymatrix1(:,1:5),'stacked','DisplayName','data(:,1:4)');

% hold on;
% bar1 = bar(ymatrix1(:,5),'EdgeColor','none','BarLayout','stacked','Parent',axes1);
set(bar1(1),'DisplayName','Conventional generators',...
    'FaceColor',[0.87058824300766 0.490196079015732 0]);
set(bar1(2),'DisplayName','Converter-based generators',...
    'FaceColor',[0 0.749019622802734 0.749019622802734]);
set(bar1(3),'DisplayName','Forced-load-curtailment',...
    'FaceColor',[0.854901969432831 0.701960802078247 1]);
set(bar1(4),'DisplayName','Discharging output of ESS',...
    'FaceColor',[0.301960796117783 0.745098054409027 0.933333337306976]);
set(bar1(5),'DisplayName','Charging output of ESS',...
    'FaceColor',[0.925490200519562 0.839215695858002 0.839215695858002]);
% hold on;
% bar1 = bar(ymatrix1(:,5));

loadcurve = zeros(24, 1);

for i = 1:24
    loadcurve(i) = ymatrix1(i,1) + ymatrix1(i,2) + ymatrix1(i,3) + ymatrix1(i,4) + ymatrix1(i,5);
end

hold on;
line1 = plot(loadcurve, 'LineWidth', 2, 'Color', [0.8 0.8 0.8],'DisplayName','Load Curve');
% legend(bar1);

% Create ylabel
ylabel('Output [ p.u. ]','FontWeight','bold');

% Create xlabel
xlabel('Time [ h ]','FontWeight','bold');

% Uncomment the following line to preserve the X-limits of the axes
% xlim(axes1,[0.5 24.5]);
% Uncomment the following line to preserve the Y-limits of the axes
% ylim(axes1,[-1 6]);
hold(axes1,'off');
% Create legend
legend1 = legend(axes1,'show');
set(legend1,...
    'Position',[0.540554691224994 0.698269381188557 0.342229191558889 0.205417601505198],...
    'FontSize',10);

